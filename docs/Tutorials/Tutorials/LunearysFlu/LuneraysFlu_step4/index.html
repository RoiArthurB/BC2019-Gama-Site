<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Tutorials/Tutorials/LunearysFlu/LuneraysFlu_step4 · GAMA-Platform</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;4-use-of-a-graph-to-constraint-the-movements-of-people&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#4-use-of-a-graph-to-constraint-the-movements-of-people&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4. Use of a graph to constraint the movements of people&lt;/h1&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Tutorials/Tutorials/LunearysFlu/LuneraysFlu_step4 · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://roiarthurb.github.io/BC2019-Gama-Site/"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;4-use-of-a-graph-to-constraint-the-movements-of-people&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#4-use-of-a-graph-to-constraint-the-movements-of-people&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4. Use of a graph to constraint the movements of people&lt;/h1&gt;
"/><meta property="og:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/atom.xml" title="GAMA-Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/feed.xml" title="GAMA-Platform Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/BC2019-Gama-Site/js/code-block-buttons.js"></script><link rel="stylesheet" href="/BC2019-Gama-Site/css/main.css"/><script src="/BC2019-Gama-Site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/BC2019-Gama-Site/"><img class="logo" src="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a target="_self">Index</a></li><li class=""><a href="/BC2019-Gama-Site/docs/Home" target="_self">Docs</a></li><li class=""><a href="/BC2019-Gama-Site/help" target="_self">Help</a></li><li class=""><a href="/BC2019-Gama-Site/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Tutorials/Tutorials/LunearysFlu/LuneraysFlu_step4</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="4-use-of-a-graph-to-constraint-the-movements-of-people"></a><a href="#4-use-of-a-graph-to-constraint-the-movements-of-people" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Use of a graph to constraint the movements of people</h1>
<p>This fourth step illustrates how to use a graph to constraint the movements of agents</p>
<p><img src="resources/images/tutorials/luneray4.png" alt="images/luneray4.png"></p>
<h2><a class="anchor" aria-hidden="true" id="formulation"></a><a href="#formulation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Formulation</h2>
<ul>
<li>Define a new global variable: the road network (graph).</li>
<li>Build the road network graph from the road agents</li>
<li>Add new attribute to the people agents (target)</li>
<li>Define a new reflex for people agents: stay.</li>
<li>Modify the move reflex of the people agents.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="model-definition"></a><a href="#model-definition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Model Definition</h2>
<h3><a class="anchor" aria-hidden="true" id="global-section"></a><a href="#global-section" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>global section</h3>
<h4><a class="anchor" aria-hidden="true" id="global-variables"></a><a href="#global-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>global variables</h4>
<p>In this model, we want that people agents move from buildings to buildings by using the shortest path in the road network. In order to compute this shortest path, we need to use a graph structure.</p>
<p>We thus define a new global variable called <em>road_network</em> of type <em>graph</em> that will represent the road network.</p>
<pre><code class="hljs"><span class="hljs-keyword">global</span>{
    <span class="hljs-comment">//... other attributes</span>
    <span class="hljs-keyword">graph</span> road_network;
    
    <span class="hljs-comment">//... init</span>
}
</code></pre>
<p>In order to compute the graph from the road network, we use, just after having creating the road agents, the <a href="Operators#as_edge_graph">as_edge_graph</a> operator. This operator automatically built a graph from a set of polylines. Each extremity point of the lines will become a node in the graph, and each polyline an edge. By default, the graph is not oriented and the weights of the edges are the perimeters of the polylines. It is of course possible to change through the use of some operators.</p>
<pre><code class="hljs">global {
    // world variable definition

    init{
        <span class="hljs-keyword">create</span> road <span class="hljs-keyword">from</span>: roads_shapefile;
        road_network &lt;- as_edge_graph(road);        
        <span class="hljs-keyword">create</span> building <span class="hljs-keyword">from</span>: buildings_shapefile;
        <span class="hljs-keyword">create</span> people <span class="hljs-keyword">number</span>:nb_people {
            location &lt;- any_location_in(one_of(building));              
        }
        ask nb_infected_init among people {
            is_infected &lt;- true;
        }
    }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="people-species"></a><a href="#people-species" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>people species</h3>
<p>We want to modify the behavior of the people agents in order to make them move from buildings to buildings by using the shortest path in the road network.</p>
<h3><a class="anchor" aria-hidden="true" id="variables"></a><a href="#variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>variables</h3>
<p>In order to implement this behavior, we will add two variables to our people species:</p>
<ul>
<li><em>target</em> of type <em>point</em> that will be the location where the agent wants to go</li>
</ul>
<pre><code class="hljs">species people skills:[moving]{
    <span class="hljs-comment">//...the other attributes</span>
    <span class="hljs-built_in">point</span> target;
    <span class="hljs-comment">//....</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="behavior"></a><a href="#behavior" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>behavior</h3>
<p>First, we add a new reflex called <em>stay</em> that will be activated when the agent is in a house (i.e. its target is null) and that will define with a probability of 0.05 if the agent has to go or not. If the agent has to go, it will randomly choose a new target (a random location inside one of the building).</p>
<pre><code class="hljs">reflex stay when: <span class="hljs-keyword">target</span> = nil {
    <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">flip</span><span class="hljs-params">(<span class="hljs-number">0.05</span>)</span> </span>{
        <span class="hljs-keyword">target</span> &lt;- any_location_in (one_of(building));
    }
}
</code></pre>
<p>Then, we modify the <em>move</em> reflex. This one will be only activated when the agent will have to move (target not null). Instead of using the <em>wander</em> action of the <em>moving</em> skill, we use the <em>goto</em> one that allows to make an agent moves toward a given target. In addition, it is possible to add a facet <em>on</em> to precise on which topology the agent will have to move on. In our case, the topology is the road network.
When the agent reach its destination (location = target), it sets its target to null.</p>
<pre><code class="hljs">reflex move when: <span class="hljs-keyword">target</span> <span class="hljs-comment">!= nil{</span>
    <span class="hljs-keyword">do</span> <span class="hljs-keyword">goto</span> <span class="hljs-keyword">target</span>:<span class="hljs-keyword">target</span> on: road_network;
    <span class="hljs-keyword">if</span> (location = <span class="hljs-keyword">target</span>) {
        <span class="hljs-keyword">target</span> &lt;- nil;
    } 
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="complete-model"></a><a href="#complete-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Complete Model</h2>
<pre><code class="hljs"><span class="hljs-attr">model</span> <span class="hljs-string">model4 </span>

<span class="hljs-attr">global</span> <span class="hljs-string">{</span>
    <span class="hljs-attr">int</span> <span class="hljs-string">nb_people &lt;- 2147;</span>
    <span class="hljs-attr">int</span> <span class="hljs-string">nb_infected_init &lt;- 5;</span>
    <span class="hljs-attr">float</span> <span class="hljs-string">step &lt;- 5 #mn;</span>
    <span class="hljs-attr">file</span> <span class="hljs-string">roads_shapefile &lt;- file("../includes/roads.shp");</span>
    <span class="hljs-attr">file</span> <span class="hljs-string">buildings_shapefile &lt;- file("../includes/buildings.shp");</span>
    <span class="hljs-attr">geometry</span> <span class="hljs-string">shape &lt;- envelope(roads_shapefile);    </span>
    <span class="hljs-attr">graph</span> <span class="hljs-string">road_network;</span>
    
    
    <span class="hljs-attr">int</span> <span class="hljs-string">nb_people_infected &lt;- nb_infected_init update: people count (each.is_infected);</span>
    <span class="hljs-attr">int</span> <span class="hljs-string">nb_people_not_infected &lt;- nb_people - nb_infected_init update: nb_people - nb_people_infected;</span>
    <span class="hljs-attr">float</span> <span class="hljs-string">infected_rate update: nb_people_infected/nb_people;</span>
    
    
    <span class="hljs-attr">init{</span>
        <span class="hljs-attr">create</span> <span class="hljs-string">road from: roads_shapefile;</span>
        <span class="hljs-attr">road_network</span> <span class="hljs-string">&lt;- as_edge_graph(road);        </span>
        <span class="hljs-attr">create</span> <span class="hljs-string">building from: buildings_shapefile;</span>
        <span class="hljs-attr">create</span> <span class="hljs-string">people number:nb_people {</span>
            <span class="hljs-attr">location</span> <span class="hljs-string">&lt;- any_location_in(one_of(building));              </span>
        <span class="hljs-attr">}</span>
        <span class="hljs-attr">ask</span> <span class="hljs-string">nb_infected_init among people {</span>
            <span class="hljs-attr">is_infected</span> <span class="hljs-string">&lt;- true;</span>
        <span class="hljs-attr">}</span>
    <span class="hljs-attr">}</span>
<span class="hljs-attr">}</span>

<span class="hljs-attr">species</span> <span class="hljs-string">people skills:[moving]{     </span>
    <span class="hljs-attr">float</span> <span class="hljs-string">speed &lt;- (2 + rnd(3)) #km/#h;</span>
    <span class="hljs-attr">bool</span> <span class="hljs-string">is_infected &lt;- false;</span>
    <span class="hljs-attr">point</span> <span class="hljs-string">target;</span>
    
    <span class="hljs-attr">reflex</span> <span class="hljs-string">stay when: target = nil {</span>
        <span class="hljs-attr">if</span> <span class="hljs-string">flip(0.05) {</span>
            <span class="hljs-attr">target</span> <span class="hljs-string">&lt;- any_location_in (one_of(building));</span>
        <span class="hljs-attr">}</span>
    <span class="hljs-attr">}</span>
        
    <span class="hljs-attr">reflex</span> <span class="hljs-string">move when: target != nil{</span>
        <span class="hljs-attr">do</span> <span class="hljs-string">goto target:target on: road_network;</span>
        <span class="hljs-attr">if</span> <span class="hljs-string">(location = target) {</span>
            <span class="hljs-attr">target</span> <span class="hljs-string">&lt;- nil;</span>
        <span class="hljs-meta">}</span> <span class="hljs-string"></span>
    <span class="hljs-attr">}</span>

    <span class="hljs-attr">reflex</span> <span class="hljs-string">infect when: is_infected{</span>
        <span class="hljs-attr">ask</span> <span class="hljs-string">people at_distance 10 #m {</span>
            <span class="hljs-attr">if</span> <span class="hljs-string">flip(0.05) {</span>
                <span class="hljs-attr">is_infected</span> <span class="hljs-string">&lt;- true;</span>
            <span class="hljs-attr">}</span>
        <span class="hljs-attr">}</span>
    <span class="hljs-attr">}</span>
    
    <span class="hljs-attr">aspect</span> <span class="hljs-string">circle {</span>
        <span class="hljs-attr">draw</span> <span class="hljs-string">circle(10) color:is_infected ? #red : #green;</span>
    <span class="hljs-attr">}</span>
<span class="hljs-attr">}</span>

<span class="hljs-attr">species</span> <span class="hljs-string">road {</span>
    <span class="hljs-attr">aspect</span> <span class="hljs-string">geom {</span>
        <span class="hljs-attr">draw</span> <span class="hljs-string">shape color: #black;</span>
    <span class="hljs-attr">}</span>
<span class="hljs-attr">}</span>

<span class="hljs-attr">species</span> <span class="hljs-string">building {</span>
    <span class="hljs-attr">aspect</span> <span class="hljs-string">geom {</span>
        <span class="hljs-attr">draw</span> <span class="hljs-string">shape color: #gray;</span>
    <span class="hljs-attr">}</span>
<span class="hljs-attr">}</span>

<span class="hljs-attr">experiment</span> <span class="hljs-string">main type: gui {</span>
    <span class="hljs-attr">parameter</span> <span class="hljs-string">"Nb people infected at init" var: nb_infected_init min: 1 max: 2147;</span>

    <span class="hljs-attr">output</span> <span class="hljs-string">{</span>
        <span class="hljs-attr">monitor</span> <span class="hljs-string">"Infected people rate" value: infected_rate;</span>
        
        <span class="hljs-attr">display</span> <span class="hljs-string">map {</span>
            <span class="hljs-attr">species</span> <span class="hljs-string">road aspect:geom;</span>
            <span class="hljs-attr">species</span> <span class="hljs-string">building aspect:geom;</span>
            <span class="hljs-attr">species</span> <span class="hljs-string">people aspect:circle;           </span>
        <span class="hljs-attr">}</span>
        
        <span class="hljs-attr">display</span> <span class="hljs-string">chart_display refresh: every(10 #cycle) {</span>
            <span class="hljs-attr">chart</span> <span class="hljs-string">"Disease spreading" type: series {</span>
                <span class="hljs-attr">data</span> <span class="hljs-string">"susceptible" value: nb_people_not_infected color: #green;</span>
                <span class="hljs-attr">data</span> <span class="hljs-string">"infected" value: nb_people_infected color: #red;</span>
            <span class="hljs-attr">}</span>
        <span class="hljs-attr">}</span>
    <span class="hljs-attr">}</span>
<span class="hljs-attr">}</span>
</code></pre>
<p><a href="LuneraysFlu_step5">Next step: Definition of 3D displays</a></p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#formulation">Formulation</a></li><li><a href="#model-definition">Model Definition</a><ul class="toc-headings"><li><a href="#global-section">global section</a></li><li><a href="#people-species">people species</a></li><li><a href="#variables">variables</a></li><li><a href="#behavior">behavior</a></li></ul></li><li><a href="#complete-model">Complete Model</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/BC2019-Gama-Site/" class="nav-home"><img src="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Docs</h5><a href="/BC2019-Gama-Site/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc2.html">Guides (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/BC2019-Gama-Site/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/BC2019-Gama-Site/blog">Blog</a><a href="https://github.com/">GitHub</a></div></section><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div></body></html>
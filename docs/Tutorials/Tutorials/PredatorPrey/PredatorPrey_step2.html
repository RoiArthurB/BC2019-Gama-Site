<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title># 2. Vegetation Dynamic · Test Site</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;&lt;code&gt;[IN PROGRESS]&lt;/code&gt;&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="# 2. Vegetation Dynamic · Test Site"/><meta property="og:type" content="website"/><meta property="og:url" content="https://roiarthurb.github.io/BC2019-Gama-Site/"/><meta property="og:description" content="&lt;p&gt;&lt;code&gt;[IN PROGRESS]&lt;/code&gt;&lt;/p&gt;
"/><meta property="og:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/BC2019-Gama-Site/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/atom.xml" title="Test Site Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/feed.xml" title="Test Site Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><link rel="stylesheet" href="/BC2019-Gama-Site/css/main.css"/><script src="/BC2019-Gama-Site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/BC2019-Gama-Site/"><img class="logo" src="/BC2019-Gama-Site/img/favicon.ico" alt="Test Site"/><h2 class="headerTitleWithLogo">Test Site</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/BC2019-Gama-Site/docs/doc1" target="_self">Docs</a></li><li class=""><a href="/BC2019-Gama-Site/help" target="_self">Help</a></li><li class=""><a href="/BC2019-Gama-Site/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"># 2. Vegetation Dynamic</h1></header><article><div><span><p><code>[IN PROGRESS]</code></p>
<h1><a class="anchor" aria-hidden="true" id="2-vegetation-dynamic"></a><a href="#2-vegetation-dynamic" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Vegetation Dynamic</h1>
<p>This second steps present the idea of environment or topological space. Defining a &quot;vegetation&quot; environment allows to define the movement of the preys through dynamic variables (use of the <em>update</em> facet). We will also discover more about displays.</p>
<h2><a class="anchor" aria-hidden="true" id="formulation"></a><a href="#formulation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Formulation</h2>
<ul>
<li>Definition of a grid (for the vegetation)</li>
<li>Definition of a dynamic for each cell (food production)</li>
<li>Display of the cell color according to the quantity of food</li>
<li>Localization of the prey agents on the cells (at its center)</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="model-definition"></a><a href="#model-definition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Model Definition</h2>
<h3><a class="anchor" aria-hidden="true" id="grid"></a><a href="#grid" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>grid</h3>
<p>In GAMA, grids are specific agent species with a particular topology. First, a grid allow yet constrains the movement of other (moving) agents but they can have variables and behaviors.</p>
<p>A grid is defined as follows:</p>
<pre><code class="hljs">   grid grid_name <span class="hljs-string">width:</span> nb_cols <span class="hljs-string">height:</span> nb_lines <span class="hljs-string">neighbors:</span> <span class="hljs-number">4</span><span class="hljs-regexp">/6/</span><span class="hljs-number">8</span> {
      ...
   }
</code></pre>
<p>With:</p>
<ul>
<li>width : number of cells along x-axis</li>
<li>height : number of cells along y-axis</li>
<li>neighbors : neighborhood type (4 - Von Neumann, 6 - hexagon or 8 - Moore)</li>
</ul>
<p>In our model, we define a grid species, called <strong>vegetation_cell</strong> composed of 50x50 cells and with a Von Neumann neighborhood.
In order for each grid agents (or cell of the grid) to represent the vegetation, we provide them with four variables:</p>
<ul>
<li><em>maxFood</em> : maximum food that a cell can contain -&gt; type: <em>float</em> ; init value: 1.0</li>
<li><em>foodProd</em> : food produced at each simulation step -&gt; type: <em>float</em> ; init value: random number between 0 and 0.01</li>
<li><em>food</em> : current quantity of food -&gt; type: <em>float</em> ; init value: random number between 0 and 1.0; at each simulation step : food &lt;- food + foodProd</li>
<li><em>color</em> : color of the cell -&gt; type: <em>rgb</em> ; init value: color computed according to the food value: more the food value is close to 1.0, greener the color is, more the food value is close to 0,  whiter the color is; update : computation of the new color depending on the current level of food (at each simulation step).</li>
</ul>
<p>The <strong>update</strong> facet allows to give a behavior to the agents. Indeed, at each simulation step, each agent is activated (by default, in a random order) and first applies for each dynamic variable (in their definition order) its update expression. In the present case, it allows us to link the displayed color of the cell to its food level.</p>
<pre><code class="hljs">   grid vegetation_cell width: <span class="hljs-number">50</span> height: <span class="hljs-number">50</span> neighbors: <span class="hljs-number">4</span> {
      <span class="hljs-built_in">float</span> maxFood &lt;- <span class="hljs-number">1.0</span> ;
      <span class="hljs-built_in">float</span> foodProd &lt;- (rnd(<span class="hljs-number">1000</span>) / <span class="hljs-number">1000</span>) * <span class="hljs-number">0.01</span> ;
      <span class="hljs-built_in">float</span> food &lt;- (rnd(<span class="hljs-number">1000</span>) / <span class="hljs-number">1000</span>) update: food + foodProd max: maxFood;
      rgb color &lt;- rgb(<span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> * (<span class="hljs-number">1</span> - food)), <span class="hljs-number">255</span>, <span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> * (<span class="hljs-number">1</span> - food))) update: rgb(<span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> * (<span class="hljs-number">1</span> - food)), <span class="hljs-number">255</span>, <span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> * (<span class="hljs-number">1</span> - food))) ;
   }
</code></pre>
<p>There are several ways to define colors in GAML:</p>
<ul>
<li>the simplest way consists in using the symbol <em>#</em> + the color name (for a limited set of  <a href="Index#Constants_and_colors">colors</a>):</li>
</ul>
<pre><code class="hljs">   <span class="hljs-selector-id">#blue</span>
   <span class="hljs-selector-id">#red</span>
</code></pre>
<ul>
<li>Another way consists in defining the 3 rgb integer values: rgb(red, green, blue) with red, green and blue between 0 and 255 (as we used in the current model.</li>
</ul>
<pre><code class="hljs">   rgb(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) : black ; rgb(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>) : white
   rgb(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) : red ;  rgb(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>) : green ;  rgb(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>) : blue
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="prey-agents"></a><a href="#prey-agents" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>prey agents</h3>
<p>In order to relate our prey agents to the vegetation cell grid, we add them with one new variable : <strong>my_cell</strong> of type vegetation_cell and for init value one of the vegetation_cell (chosen randomly).</p>
<pre><code class="hljs">   <span class="hljs-attr">species</span> <span class="hljs-string">prey {</span>
      <span class="hljs-attr">...</span>
      <span class="hljs-attr">vegetation_cell</span> <span class="hljs-string">myCell &lt;- one_of (vegetation_cell) ;</span>
   <span class="hljs-meta">}</span> <span class="hljs-string"></span>
</code></pre>
<p>It is possible to obtain the list of all agents of a given species by using the name of the species while <strong>one_of</strong> to pick one element randomly from this list.</p>
<p>We linked each prey agent to a vegetation_cell but we need to locate them onto the cell. To do so, we set the prey location as equals to the location of the vegetation cell (i.e. its centroid <strong>location</strong>), we use in the init block the <strong>&lt;-</strong> statement that allows to modify the value of a variable :</p>
<pre><code class="hljs">species prey {
     ...
     init {
         <span class="hljs-keyword">location</span> <span class="hljs-title">&lt;- myCell</span>.location;
     }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="display"></a><a href="#display" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>display</h3>
<p>In order to visualize the vegetation , we need to add it to the display. We use for that the statement <strong>grid</strong> with the optional facet <strong>lines</strong> to draw the border of the cells. Note that grid agents have built-in aspect thus it is not necessary to define one.</p>
<pre><code class="hljs">   output {
      <span class="hljs-keyword">display </span>main_display {
         grid vegetation_cell lines: <span class="hljs-comment">#black;</span>
         species prey aspect: <span class="hljs-keyword">base </span><span class="hljs-comment">;</span>
      }
   }
</code></pre>
<p>Note that the layers in a display work like layers in a GIS; the drawing order will be respected. In our model, the prey agents will be drawn above the vegetation_cell grid thus they need to be declared afterward.</p>
<h2><a class="anchor" aria-hidden="true" id="complete-model"></a><a href="#complete-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Complete Model</h2>
<pre><code class="hljs">model prey_predator

global {
    <span class="hljs-built_in">int</span> nb_preys_init &lt;- <span class="hljs-number">200</span>;
    init {
        create prey number: nb_preys_init ;
    }
}

species prey {
    <span class="hljs-built_in">float</span> size &lt;- <span class="hljs-number">1.0</span> ;
    rgb color &lt;- #blue;
    vegetation_cell myCell &lt;- one_of (vegetation_cell) ;
        
    init {
        location &lt;- myCell.location;
    }
        
    aspect base {
        draw circle(size) color: color ;
    }
}

grid vegetation_cell width: <span class="hljs-number">50</span> height: <span class="hljs-number">50</span> neighbors: <span class="hljs-number">4</span> {
    <span class="hljs-built_in">float</span> maxFood &lt;- <span class="hljs-number">1.0</span> ;
    <span class="hljs-built_in">float</span> foodProd &lt;- (rnd(<span class="hljs-number">1000</span>) / <span class="hljs-number">1000</span>) * <span class="hljs-number">0.01</span> ;
    <span class="hljs-built_in">float</span> food &lt;- (rnd(<span class="hljs-number">1000</span>) / <span class="hljs-number">1000</span>) max: maxFood update: food + foodProd ;
    rgb color &lt;- rgb(<span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> * (<span class="hljs-number">1</span> - food)), <span class="hljs-number">255</span>, <span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> * (<span class="hljs-number">1</span> - food))) update: rgb(<span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> * (<span class="hljs-number">1</span> - food)), <span class="hljs-number">255</span>, <span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> *(<span class="hljs-number">1</span> - food))) ;
}

experiment prey_predator type: gui {
    parameter <span class="hljs-string">"Initial number of preys: "</span> var: nb_preys_init min: <span class="hljs-number">1</span> max: <span class="hljs-number">1000</span> category: <span class="hljs-string">"Prey"</span> ;
    output {
        display main_display {
            grid vegetation_cell lines: #black ;
            species prey aspect: base ;
        }
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#formulation">Formulation</a></li><li><a href="#model-definition">Model Definition</a><ul class="toc-headings"><li><a href="#grid">grid</a></li><li><a href="#prey-agents">prey agents</a></li><li><a href="#display">display</a></li></ul></li><li><a href="#complete-model">Complete Model</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/BC2019-Gama-Site/" class="nav-home"><img src="/BC2019-Gama-Site/img/favicon.ico" alt="Test Site" width="66" height="58"/></a><div><h5>Docs</h5><a href="/BC2019-Gama-Site/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc2.html">Guides (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/BC2019-Gama-Site/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/BC2019-Gama-Site/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/BC2019-Gama-Site/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div></body></html>
<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>References/ModelLibrary/Features/Charts/Charts Ant Foraging (Charts examples) · GAMA-Platform</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="GAMA, modeling made easy"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="References/ModelLibrary/Features/Charts/Charts Ant Foraging (Charts examples) · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://roiarthurb.github.io/BC2019-Gama-Site/"/><meta property="og:description" content="GAMA, modeling made easy"/><meta property="og:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/atom.xml" title="GAMA-Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/feed.xml" title="GAMA-Platform Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/BC2019-Gama-Site/js/code-block-buttons.js"></script><link rel="stylesheet" href="/BC2019-Gama-Site/css/main.css"/><script src="/BC2019-Gama-Site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/BC2019-Gama-Site/"><img class="logo" src="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a target="_self">Index</a></li><li class=""><a href="/BC2019-Gama-Site/docs/Home" target="_self">Docs</a></li><li class=""><a href="/BC2019-Gama-Site/help" target="_self">Help</a></li><li class=""><a href="/BC2019-Gama-Site/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">References/ModelLibrary/Features/Charts/Charts Ant Foraging (Charts examples)</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="ant-foraging-charts-examples"></a><a href="#ant-foraging-charts-examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ant Foraging (Charts examples)</h1>
<p>_Author : _</p>
<p>Toy Model ant using the question of how ants search food and use pheromons to return to their nest once they did find food. In this model, the charts are particularly used.</p>
<p>Code of the model :</p>
<pre><code class="hljs">model ants

global {
    <span class="hljs-comment">//Number of ants</span>
    <span class="hljs-built_in">int</span> ants_number &lt;- <span class="hljs-number">100</span> min: <span class="hljs-number">1</span> max: <span class="hljs-number">2000</span> ;
    <span class="hljs-comment">//Evaporation value per cycle for the pheromons</span>
    <span class="hljs-built_in">float</span> evaporation_per_cycle &lt;- <span class="hljs-number">5.0</span> min: <span class="hljs-number">0.0</span> max: <span class="hljs-number">240.0</span> ;
    <span class="hljs-comment">//Diffusion rate for the pheromons</span>
    <span class="hljs-built_in">float</span> diffusion_rate &lt;- <span class="hljs-number">1.0</span> min: <span class="hljs-number">0.0</span> max: <span class="hljs-number">1.0</span> ;
    <span class="hljs-built_in">bool</span> use_icons &lt;- <span class="hljs-literal">true</span> ;
    <span class="hljs-built_in">bool</span> display_state &lt;- <span class="hljs-literal">true</span>;
    <span class="hljs-comment">//Size of the grid</span>
    <span class="hljs-built_in">int</span> gridsize &lt;- <span class="hljs-number">75</span> ;
    <span class="hljs-comment">//Center of the grid to put the location of the nest</span>
    point center <span class="hljs-keyword">const</span>: <span class="hljs-literal">true</span> &lt;- { (gridsize / <span class="hljs-number">2</span>),  (gridsize / <span class="hljs-number">2</span>)} ;
    file types <span class="hljs-keyword">const</span>: <span class="hljs-literal">true</span> &lt;- (pgm_file(<span class="hljs-string">'../images/environment75x75.pgm'</span>)) ;
    <span class="hljs-built_in">string</span> ant_shape_empty <span class="hljs-keyword">const</span>: <span class="hljs-literal">true</span> &lt;- <span class="hljs-string">'../icons/ant.png'</span> ;
    <span class="hljs-built_in">string</span> ant_shape_full <span class="hljs-keyword">const</span>: <span class="hljs-literal">true</span> &lt;- <span class="hljs-string">'../icons/full_ant.png'</span>  ;
    rgb C00CC00 <span class="hljs-keyword">const</span>: <span class="hljs-literal">true</span> &lt;- rgb(<span class="hljs-string">'#00CC00'</span>) ;    
    rgb C009900 <span class="hljs-keyword">const</span>: <span class="hljs-literal">true</span> &lt;- rgb(<span class="hljs-string">'#009900'</span>) ; 
    rgb C005500 <span class="hljs-keyword">const</span>: <span class="hljs-literal">true</span> &lt;- rgb(<span class="hljs-string">'#005500'</span>) ; 
    <span class="hljs-built_in">int</span> food_gathered &lt;- <span class="hljs-number">0</span> ;   
    geometry shape &lt;- square(gridsize);
    init{  
        <span class="hljs-comment">//Ant are placed randomly in the nest</span>
        create ant number: ants_number with: [location::any_location_in (ant_grid(center))] ;
    }
    
    <span class="hljs-comment">//Reflex to diffuse the road of pheromon on the grid</span>
    <span class="hljs-built_in">ref</span>lex diffuse {
      diffuse var:road on:ant_grid proportion: diffusion_rate radius:<span class="hljs-number">2</span> propagation: gradient;
   }



}

<span class="hljs-comment">//Grid to discretize space for the food and the nest</span>
grid ant_grid width: gridsize height: gridsize neighbors: <span class="hljs-number">8</span> use_regular_agents: <span class="hljs-literal">false</span> {
    <span class="hljs-built_in">bool</span> multiagent &lt;- <span class="hljs-literal">true</span> ;
    <span class="hljs-built_in">float</span> road &lt;- <span class="hljs-number">0.0</span> max:<span class="hljs-number">240.0</span> update: (road&lt;=evaporation_per_cycle) ? <span class="hljs-number">0.0</span> : road-evaporation_per_cycle;
    <span class="hljs-built_in">int</span> type &lt;- <span class="hljs-built_in">int</span>(types at {grid_x,grid_y}) ;
    <span class="hljs-built_in">bool</span> isNestLocation &lt;- (self distance_to center) &lt; <span class="hljs-number">4</span> ; 
    <span class="hljs-built_in">bool</span> isFoodLocation &lt;- type = <span class="hljs-number">2</span> ; 
    rgb color &lt;- isNestLocation ? °violet:((food &gt; <span class="hljs-number">0</span>)? °blue : ((road &lt; <span class="hljs-number">0.001</span>)? rgb ([<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>]) : ((road &gt; <span class="hljs-number">2</span>)? °white : ((road &gt; <span class="hljs-number">0.5</span>)? (C00CC00) : ((road &gt; <span class="hljs-number">0.2</span>)? (C009900) : (C005500)))))) update: isNestLocation ? °violet:((food &gt; <span class="hljs-number">0</span>)? °blue : ((road &lt; <span class="hljs-number">0.001</span>)? rgb ([<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>]) : ((road &gt; <span class="hljs-number">2</span>)? °white : ((road &gt; <span class="hljs-number">0.5</span>)? (C00CC00) : ((road &gt; <span class="hljs-number">0.2</span>)? (C009900) : (C005500)))))) ;
    <span class="hljs-built_in">int</span> food &lt;- isFoodLocation ? <span class="hljs-number">5</span> : <span class="hljs-number">0</span> ;
    <span class="hljs-built_in">int</span> nest <span class="hljs-keyword">const</span>: <span class="hljs-literal">true</span> &lt;- <span class="hljs-number">300</span> - <span class="hljs-built_in">int</span>(self distance_to center) ;
    
}
<span class="hljs-comment">//Species ant that will move and follow a final state machine</span>
species ant skills: [moving] control: fsm {
    <span class="hljs-built_in">float</span> speed &lt;- <span class="hljs-number">2.0</span> ;
    ant_grid place update: ant_grid (location ); 
    <span class="hljs-built_in">string</span> im &lt;- <span class="hljs-string">'ant_shape_empty'</span> ;
    <span class="hljs-built_in">bool</span> hasFood &lt;- <span class="hljs-literal">false</span> ;



    <span class="hljs-built_in">ref</span>lex diffuse_road when:hasFood=<span class="hljs-literal">true</span>{
      ant_grid(location).road &lt;- ant_grid(location).road + <span class="hljs-number">100.0</span>;
   }
   <span class="hljs-comment">//Action to pick food</span>
    action pick {
        im &lt;- ant_shape_full ;
        hasFood &lt;- <span class="hljs-literal">true</span> ;
        place.food &lt;- place.food - <span class="hljs-number">1</span> ;
    }
    <span class="hljs-comment">//Action to drop food</span>
    action drop {
        food_gathered &lt;- food_gathered + <span class="hljs-number">1</span> ;
        hasFood &lt;- <span class="hljs-literal">false</span> ;
        heading &lt;- heading - <span class="hljs-number">180</span> ;
    }
    <span class="hljs-comment">//Action to chose the best place according to the possible food in the neighbor cells</span>
    action choose_best_place type: ant_grid {
        list&lt;ant_grid&gt; list_places &lt;- place.neighbors ;
        <span class="hljs-keyword">if</span> (list_places count (each.food &gt; <span class="hljs-number">0</span>)) &gt; <span class="hljs-number">0</span>  {
            <span class="hljs-keyword">return</span> (list_places first_with (each.food &gt; <span class="hljs-number">0</span>)) ;
        } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">int</span> min_nest  &lt;-  (list_places min_of (each.nest)) ;
                list_places &lt;- list_places sort ((each.nest = min_nest) ? each.road :  <span class="hljs-number">0.0</span>) ;
                <span class="hljs-keyword">return</span> last(list_places) ;
            }
    }
    
    <span class="hljs-comment">//Initial state of the ant : wander until it finds food or find a road to follow</span>
    state wandering initial: <span class="hljs-literal">true</span> {
        <span class="hljs-keyword">do</span> wander amplitude:<span class="hljs-number">120</span> ;
        transition to: carryingFood when: place.food &gt; <span class="hljs-number">0</span> {
            <span class="hljs-keyword">do</span> pick ;
        }
        transition to: followingRoad when: place.road &gt; <span class="hljs-number">0.05</span> ;
    }
    <span class="hljs-comment">//State to carry food to the nest once the food is found</span>
    state carryingFood {
        <span class="hljs-keyword">do</span> goto target: center ;
        transition to: wandering when: place.isNestLocation { 
            <span class="hljs-keyword">do</span> drop ;
        }
    }
    <span class="hljs-comment">//State to follow a road </span>
    state followingRoad {
        location &lt;- (self choose_best_place []) as point ;
        transition to: carryingFood when: place.food &gt; <span class="hljs-number">0</span> {
            <span class="hljs-keyword">do</span> pick ;
        }
        transition to: wandering when: (place.road &lt; <span class="hljs-number">0.05</span>) ;
    }
    aspect text {
        <span class="hljs-keyword">if</span> use_icons {
            draw  hasFood ? file(ant_shape_full) : file(ant_shape_empty) rotate: heading at: location size: {<span class="hljs-number">7</span>,<span class="hljs-number">5</span>} ;
        } <span class="hljs-keyword">else</span> {
            draw circle(<span class="hljs-number">1.0</span>) empty: !hasFood color: rgb (<span class="hljs-string">'orange'</span>) ;
        }
        <span class="hljs-keyword">if</span> display_state {
            draw state at: location + {<span class="hljs-number">-3</span>,<span class="hljs-number">1.5</span>} color: °white size: <span class="hljs-number">0.8</span> ;
        }
    }
    aspect <span class="hljs-keyword">default</span> {
        draw circle(<span class="hljs-number">1.0</span>) empty: !hasFood color: #orange ; 
    }
}
experiment Ant type: gui {
    <span class="hljs-comment">//Parameters to play with  in the gui</span>
    parameter <span class="hljs-string">'Number of ants:'</span> var: ants_number category: <span class="hljs-string">'Model'</span> ;
    parameter <span class="hljs-string">'Evaporation of the signal (unit/cycle):'</span> var: evaporation_per_cycle category: <span class="hljs-string">'Model'</span> ;
    parameter <span class="hljs-string">'Rate of diffusion of the signal (%/cycle):'</span> var: diffusion_rate category: <span class="hljs-string">'Model'</span> ;
    parameter <span class="hljs-string">'Use icons for the agents:'</span> var: use_icons category: <span class="hljs-string">'Display'</span> ;
    parameter <span class="hljs-string">'Display state of agents:'</span> var: display_state category: <span class="hljs-string">'Display'</span> ;

    list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt; nbants&lt;-[[<span class="hljs-number">0</span>]];
    list&lt;<span class="hljs-built_in">string</span>&gt; statesnames&lt;-[<span class="hljs-string">"wandering"</span>];
    list&lt;<span class="hljs-built_in">string</span>&gt; categnames&lt;-[<span class="hljs-string">"empty"</span>,<span class="hljs-string">"carry"</span>];
    list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt; nbantsbydist&lt;-[[<span class="hljs-number">0</span>]];
    list xytestvallist&lt;-[[[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">3</span>]],[[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]],[[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]],[[<span class="hljs-number">1</span>,<span class="hljs-number">4</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">5</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]]];
    list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt; xyval&lt;-[[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">2</span>]];

    <span class="hljs-comment">//Reflex to update the charts, belonging to the experiment bloc as it will not be used by other experiment which don't have the charts</span>
    <span class="hljs-built_in">ref</span>lex update_charts
    {
        nbants&lt;-list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt;([]);
        statesnames&lt;-list&lt;<span class="hljs-built_in">string</span>&gt;([]);
        categnames&lt;-[<span class="hljs-string">"empty"</span>,<span class="hljs-string">"carry"</span>];
        nbantsbydist&lt;-list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt;([]);
        ant x&lt;-one_of(world.ant);
        loop x over:list(world.ant)
        {
            <span class="hljs-keyword">if</span> !(statesnames contains (x.state))
            {               
            add [(list(ant) count (each.state=x.state <span class="hljs-keyword">and</span> !each.hasFood)),(list(ant) count (each.state=x.state <span class="hljs-keyword">and</span> each.hasFood))] to: nbants;
            add (x.state) to:statesnames;               
            <span class="hljs-built_in">int</span> d&lt;<span class="hljs-number">-0</span>;
            list&lt;<span class="hljs-built_in">int</span>&gt; nl&lt;-list&lt;<span class="hljs-built_in">int</span>&gt;([]);
            loop d <span class="hljs-keyword">from</span>:<span class="hljs-number">0</span> to:<span class="hljs-number">9</span>
                {
            add (list(ant) count (each.state=x.state <span class="hljs-keyword">and</span> (((each distance_to center)&gt;gridsize/<span class="hljs-number">20</span>*d) <span class="hljs-keyword">and</span> ((each distance_to center)&lt;gridsize/<span class="hljs-number">20</span>*(d+<span class="hljs-number">1</span>))))) to: nl;
                }
            add nl to:nbantsbydist;
            }
<span class="hljs-comment">//          add length((list(world.ant) collect (each.next_place distance_to each.location)) where (each=x)) to:nbants;</span>
        }
        <span class="hljs-comment">//write("nbants"+nbants);</span>
        <span class="hljs-comment">//write("nbantsbydist"+nbantsbydist);</span>
        <span class="hljs-comment">//write("states"+statesnames);      </span>
    }
    
    <span class="hljs-comment">//The different displays</span>
    output {
        display Ants type: opengl {
            grid ant_grid ;
            species ant aspect: text ;
        }
        display ProportionCarryFood {
            chart <span class="hljs-string">"Proportions carrying: Pie"</span>  size: {<span class="hljs-number">0.5</span>,<span class="hljs-number">0.5</span>} position: {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>} type:pie
            {
                data <span class="hljs-string">"empty_ants"</span> value:(list(ant) count (!each.hasFood)) color:°red;
                data <span class="hljs-string">"carry_food_ants"</span> value:(list(ant) count (each.hasFood)) color:°green;
                
            }
            
            chart <span class="hljs-string">"Proportions carrying: Radar"</span>  size: {<span class="hljs-number">0.5</span>,<span class="hljs-number">0.5</span>} position: {<span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>} type:radar
            axes:#white

            {
                data <span class="hljs-string">"empty"</span> value:(list(ant) count (!each.hasFood)) 
                accumulate_values:<span class="hljs-literal">true</span>
                color:°red;             
                data <span class="hljs-string">"carry"</span> value:(list(ant) count (each.hasFood)) 
                accumulate_values:<span class="hljs-literal">true</span>
                color:°blue;                
            }
            
            chart <span class="hljs-string">"Proportion: serie"</span>   size: {<span class="hljs-number">1.0</span>,<span class="hljs-number">0.5</span>} position: {<span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>} type:series 
            series_label_position: legend
            style:stack
            {
                datalist [<span class="hljs-string">"empty"</span>,<span class="hljs-string">"carry"</span>] accumulate_values:<span class="hljs-literal">true</span> 
                value:[(list(ant) count (!each.hasFood)),(list(ant) count (each.hasFood))] 
                color:[°red,°green];                
            }
        }
<span class="hljs-comment">// idem with stacked bar:</span>
<span class="hljs-comment">/* 
        display ProportionByState {
            chart "DataListListBar" type:histogram 
            x_serie_labels: categnames 
            series_label_position: legend
            {
                datalist value:nbants legend:statesnames style:stack;
            }
            
        }
*/</span>
            <span class="hljs-comment">// Idem with datalist:</span>
<span class="hljs-comment">//      display PositionByState {</span>
<span class="hljs-comment">//          chart "Position by state (datalist)" type:scatter</span>
<span class="hljs-comment">//          {</span>
<span class="hljs-comment">//              datalist ["empty","carry"] value:[((list(ant) where (!each.hasFood))  collect each.location),((list(ant) where (each.hasFood))  collect each.location)] color:[°red,°green] line_visible:false;             </span>
<span class="hljs-comment">//          }</span>
<span class="hljs-comment">//      }</span>
        display CentroidPosition {
            chart <span class="hljs-string">"Positions and History of Centroide and size by Carry state"</span> type:scatter
            {
                datalist [<span class="hljs-string">"avg-carry"</span>,<span class="hljs-string">"avg-empty"</span>] value:[mean((list(ant) where (each.hasFood)) collect each.location),
                    mean((list(ant) where (!each.hasFood)) collect each.location)
                ]
                marker_size: [length(list(ant) where (each.hasFood))/<span class="hljs-number">20</span>,length(list(ant) where (!each.hasFood))/<span class="hljs-number">20</span>]
                     color:[°red,°green] 
                     fill:<span class="hljs-literal">false</span>
                     line_visible:<span class="hljs-literal">true</span>;             
                data <span class="hljs-string">"empty_ants"</span> value:((list(ant) where (!each.hasFood)) collect each.location) color:°red 
                accumulate_values:<span class="hljs-literal">false</span>
                line_visible:<span class="hljs-literal">false</span>;
                data <span class="hljs-string">"carry_food_ants"</span> value:((list(ant) where (each.hasFood)) collect each.location) 
                accumulate_values:<span class="hljs-literal">false</span>
                color:°green line_visible:<span class="hljs-literal">false</span>;

            }
        }   
        display Distribution2dPosition {
            chart <span class="hljs-string">"Distribution of the X positions"</span>   size: {<span class="hljs-number">0.65</span>,<span class="hljs-number">0.3</span>} position: {<span class="hljs-number">0.05</span>, <span class="hljs-number">0</span>} type:histogram
            
            {
                datalist (distribution_of(list(ant) collect each.location.x,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"legend"</span>) 
                    value:(distribution_of(list(ant) collect each.location.x,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"values"</span>);
            }
            chart <span class="hljs-string">"Distribution of the Y positions"</span>   size: {<span class="hljs-number">0.3</span>,<span class="hljs-number">0.7</span>} position: {<span class="hljs-number">0.7</span>, <span class="hljs-number">0.28</span>} type:histogram
            reverse_axes:<span class="hljs-literal">true</span>
            
            {
                datalist reverse(distribution_of(list(ant) collect each.location.x,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"legend"</span>) 
                    value:reverse(distribution_of(list(ant) collect each.location.x,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"values"</span>);
            }

            chart <span class="hljs-string">"Distribution2d of the XvsY positions- heatmap"</span>   size: {<span class="hljs-number">0.7</span>,<span class="hljs-number">0.7</span>} position: {<span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>} type:heatmap
            x_serie_labels: (distribution2d_of(list(ant) collect each.location.x,list(ant) collect each.location.y,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"legendx"</span>)
            y_serie_labels: (distribution2d_of(list(ant) collect each.location.x,list(ant) collect each.location.y,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"legendy"</span>)
            series_label_position:none
            {
                data  <span class="hljs-string">"XYdistrib"</span>
                    value:(distribution2d_of(list(ant) collect each.location.x,list(ant) collect each.location.y,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"values"</span>)
                    color:[#red];
            }
        }
        
        display DistributionPosition {
            chart <span class="hljs-string">"Distribution of the X positions"</span>   size: {<span class="hljs-number">0.92</span>,<span class="hljs-number">0.3</span>} position: {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>} type:histogram
            
            {
                datalist (distribution_of(list(ant) collect each.location.x,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"legend"</span>) 
                    value:(distribution_of(list(ant) collect each.location.x,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"values"</span>);
            }
            chart <span class="hljs-string">"Distribution of the X positions- heatmap"</span>   size: {<span class="hljs-number">1.0</span>,<span class="hljs-number">0.7</span>} position: {<span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>} type:heatmap
            x_serie_labels: (distribution_of(list(ant) collect each.location.x,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"legend"</span>)
            y_range:<span class="hljs-number">50</span>
            {
                data  <span class="hljs-string">"Xdistrib"</span>
                    value:(distribution_of(list(ant) collect each.location.x,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"values"</span>)
                    color:[#red];
            }
        }   
        }
    
    }
    
<span class="hljs-comment">//Experiment with only two display : the grid and the ants, and a chart</span>
experiment AntOneDisp type: gui {
    parameter <span class="hljs-string">'Number of ants:'</span> var: ants_number category: <span class="hljs-string">'Model'</span> ;
    parameter <span class="hljs-string">'Evaporation of the signal unit/cycle):'</span> var: evaporation_per_cycle category: <span class="hljs-string">'Model'</span> ;
    parameter <span class="hljs-string">'Rate of diffusion of the signal (%/cycle):'</span> var: diffusion_rate category: <span class="hljs-string">'Model'</span> ;
    parameter <span class="hljs-string">'Use icons for the agents:'</span> var: use_icons category: <span class="hljs-string">'Display'</span> ;
    parameter <span class="hljs-string">'Display state of agents:'</span> var: display_state category: <span class="hljs-string">'Display'</span> ;

    list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt; nbants&lt;-[[<span class="hljs-number">0</span>]];
    list&lt;<span class="hljs-built_in">string</span>&gt; statesnames&lt;-[<span class="hljs-string">""</span>];
    list&lt;<span class="hljs-built_in">string</span>&gt; categnames&lt;-[<span class="hljs-string">"empty"</span>,<span class="hljs-string">"carry"</span>];
    list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt; nbantsbydist&lt;-[[<span class="hljs-number">0</span>]];
    list xytestvallist&lt;-[[[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">3</span>]],[[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]],[[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]],[[<span class="hljs-number">1</span>,<span class="hljs-number">4</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">5</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]]];
    list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt; xyval&lt;-[[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">2</span>]];

    <span class="hljs-built_in">ref</span>lex update_charts
    {
        ant x&lt;-one_of(world.ant);
        nbants&lt;-list&lt;list&lt;<span class="hljs-built_in">int</span>&gt;&gt;([]);
        statesnames&lt;-list&lt;<span class="hljs-built_in">string</span>&gt;([]);
        loop x over:list(world.ant)
        {
            <span class="hljs-keyword">if</span> !(statesnames contains (x.state))
            {               
            add [(list(ant) count (each.state=x.state <span class="hljs-keyword">and</span> !each.hasFood)),(list(ant) count (each.state=x.state <span class="hljs-keyword">and</span> each.hasFood))] to: nbants;
            add (x.state) to:statesnames;               
            <span class="hljs-built_in">int</span> d&lt;<span class="hljs-number">-0</span>;
            list&lt;<span class="hljs-built_in">int</span>&gt; nl&lt;-list&lt;<span class="hljs-built_in">int</span>&gt;([]);
            loop d <span class="hljs-keyword">from</span>:<span class="hljs-number">0</span> to:<span class="hljs-number">9</span>
                {
            add (list(ant) count (each.state=x.state <span class="hljs-keyword">and</span> (((each distance_to center)&gt;gridsize/<span class="hljs-number">20</span>*d) <span class="hljs-keyword">and</span> ((each distance_to center)&lt;gridsize/<span class="hljs-number">20</span>*(d+<span class="hljs-number">1</span>))))) to: nl;
                }
            add nl to:nbantsbydist;
            }
        }
        write(<span class="hljs-string">"nbants"</span>+nbants);
        write(<span class="hljs-string">"nbantsbydist"</span>+nbantsbydist);
        write(<span class="hljs-string">"states"</span>+statesnames);        
    }
    output {
        display Ants type: opengl {
            grid ant_grid ;
            species ant aspect: text ;
        }

        display ChartScatter {
            chart <span class="hljs-string">"Distribution2d of the XvsY positions- heatmap"</span>   size: {<span class="hljs-number">0.7</span>,<span class="hljs-number">0.7</span>} position: {<span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>} type:heatmap
            x_serie_labels: (distribution2d_of(list(ant) collect each.location.x,list(ant) collect each.location.y,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"legendx"</span>)
            y_serie_labels: (distribution2d_of(list(ant) collect each.location.x,list(ant) collect each.location.y,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"legendy"</span>)
            series_label_position:none
            {
                data  <span class="hljs-string">"XYdistrib"</span>
                    value:(distribution2d_of(list(ant) collect each.location.x,list(ant) collect each.location.y,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>) at <span class="hljs-string">"values"</span>)
                    color:[#red];
            }
            
            }
    }
}





</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/BC2019-Gama-Site/" class="nav-home"><img src="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Docs</h5><a href="/BC2019-Gama-Site/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc2.html">Guides (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/BC2019-Gama-Site/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/BC2019-Gama-Site/blog">Blog</a><a href="https://github.com/">GitHub</a></div></section><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div></body></html>
<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>References/ModelLibrary/Features/Color/Color Bubble Sort 3D · Test Site</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="A website for testing"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="References/ModelLibrary/Features/Color/Color Bubble Sort 3D · Test Site"/><meta property="og:type" content="website"/><meta property="og:url" content="https://roiarthurb.github.io/BC2019-Gama-Site/"/><meta property="og:description" content="A website for testing"/><meta property="og:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/BC2019-Gama-Site/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/atom.xml" title="Test Site Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/feed.xml" title="Test Site Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><link rel="stylesheet" href="/BC2019-Gama-Site/css/main.css"/><script src="/BC2019-Gama-Site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/BC2019-Gama-Site/"><img class="logo" src="/BC2019-Gama-Site/img/favicon.ico" alt="Test Site"/><h2 class="headerTitleWithLogo">Test Site</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/BC2019-Gama-Site/docs/doc1" target="_self">Docs</a></li><li class=""><a href="/BC2019-Gama-Site/help" target="_self">Help</a></li><li class=""><a href="/BC2019-Gama-Site/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">References/ModelLibrary/Features/Color/Color Bubble Sort 3D</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="creating-color-and-sort-cubes-by-color"></a><a href="#creating-color-and-sort-cubes-by-color" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating color and sort cubes by color</h1>
<p><em>Author :  Arnaud Grignard</em></p>
<p>A model to show how to create color by using the rgb operator, the color depending on the position of cube in the xyz space. The cubes are randomly mixed to finally be sorted according to the color of each vertix of the whole big cube, using the bubble sort algorithm (<a href="https://en.wikipedia.org/wiki/Bubble_sort">https://en.wikipedia.org/wiki/Bubble_sort</a>).</p>
<p>Code of the model :</p>
<pre><code class="hljs">
model bubblesort3D


global {

<span class="hljs-comment">//Number of cubes by faces of the whole big cube</span>
<span class="hljs-built_in">int</span> nb_cells&lt;<span class="hljs-number">-15</span>;

geometry <span class="hljs-built_in">shape</span> &lt;- cube(nb_cells) ;


bool change &lt;- <span class="hljs-keyword">true</span>;

init {
    <span class="hljs-comment">//We create nb_cells^3 cubes and we define their color depending on their position in XYZ</span>
    <span class="hljs-built_in">loop</span> i from:<span class="hljs-number">0</span> to:nb_cells<span class="hljs-number">-1</span>{
        <span class="hljs-built_in">loop</span> j from:<span class="hljs-number">0</span> to: nb_cells<span class="hljs-number">-1</span>{
            <span class="hljs-built_in">loop</span> k from:<span class="hljs-number">0</span> to:nb_cells<span class="hljs-number">-1</span>{
              create cells{
                location &lt;-{i mod nb_cells,j mod nb_cells, k mod nb_cells};
                
                <span class="hljs-comment">//The canal RGB limit color to 255 by canal</span>
                <span class="hljs-built_in">red</span> &lt;- <span class="hljs-built_in">float</span>((i mod nb_cells)* <span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> / nb_cells));
                <span class="hljs-built_in">green</span> &lt;- <span class="hljs-built_in">float</span>((j mod nb_cells) * <span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> / nb_cells));
                <span class="hljs-built_in">blue</span> &lt;- <span class="hljs-built_in">float</span>((k mod nb_cells) * <span class="hljs-built_in">int</span>(<span class="hljs-number">255</span> / nb_cells));
                
                <span class="hljs-comment">//We create the color according to the value of the red, green and blue canals</span>
                <span class="hljs-built_in">color</span> &lt;- rgb(<span class="hljs-built_in">red</span>,<span class="hljs-built_in">green</span>,<span class="hljs-built_in">blue</span>);
              } 
            }   
        }
    }
    
    <span class="hljs-comment">//We mix all the cubes randomly by permuting two randomly chosen cubes</span>
    <span class="hljs-built_in">loop</span> times: <span class="hljs-number">10000</span> {
            ask one_of(cells) {
                cells one_cells &lt;- one_of(cells);
                <span class="hljs-keyword">if</span> (self != one_cells) {
                    <span class="hljs-built_in">point</span> loc &lt;- <span class="hljs-built_in">copy</span>(location);
                    location &lt;- one_cells.location;
                    one_cells.location &lt;- loc;
                }
            }
        }
    
        

}

<span class="hljs-comment">//Reflex to finish the execution of the model when nothing has changed during the cycle</span>
reflex end {
    <span class="hljs-keyword">if</span> (not change) {
        do pause;   
    } 
    change &lt;- <span class="hljs-keyword">false</span>;
    }
}


species cells{

    rgb <span class="hljs-built_in">color</span>;
    <span class="hljs-built_in">float</span> <span class="hljs-built_in">red</span>;
    <span class="hljs-built_in">float</span> <span class="hljs-built_in">green</span>;
    <span class="hljs-built_in">float</span> <span class="hljs-built_in">blue</span>;
    list&lt;cells&gt; neigbhours update: cells at_distance (<span class="hljs-number">1.1</span>);
    
    <span class="hljs-comment">//Update of the neighbors cubes at each cycle of the simulation according to their location</span>
    cells upper_cell_y update: neigbhours first_with (<span class="hljs-built_in">shape</span>.location.y &gt; each.<span class="hljs-built_in">shape</span>.location.y);
    cells upper_cell_x update: neigbhours first_with (<span class="hljs-built_in">shape</span>.location.x &gt; each.<span class="hljs-built_in">shape</span>.location.x);
    cells upper_cell_z update: neigbhours first_with (<span class="hljs-built_in">shape</span>.location.z &gt; each.<span class="hljs-built_in">shape</span>.location.z);
    
    <span class="hljs-comment">//We permute the cube agent with its neighbor if its intensity is greater according to the canal related to its axis (z for canal blue, y for green and x for red)</span>
    reflex swap_z when: upper_cell_z != nil and <span class="hljs-built_in">blue</span> &lt; upper_cell_z.<span class="hljs-built_in">blue</span>{ 
        <span class="hljs-built_in">point</span> tmp1Loc &lt;-location;
        location &lt;- upper_cell_z.location;  
        upper_cell_z.location&lt;-tmp1Loc;     
        change &lt;- <span class="hljs-keyword">true</span>; 
    }
    
    reflex swap_y when: upper_cell_y != nil and <span class="hljs-built_in">green</span> &lt; upper_cell_y.<span class="hljs-built_in">green</span>{ 
        <span class="hljs-built_in">point</span> tmp1Loc &lt;-location;
        location &lt;- upper_cell_y.location;  
        upper_cell_y.location&lt;-tmp1Loc;     
        change &lt;- <span class="hljs-keyword">true</span>; 
    }
    
    reflex swap_x when: upper_cell_x != nil and <span class="hljs-built_in">red</span> &lt; upper_cell_x.<span class="hljs-built_in">red</span>{ 
        <span class="hljs-built_in">point</span> tmp1Loc &lt;-location;
        location &lt;- upper_cell_x.location;  
        upper_cell_x.location&lt;-tmp1Loc;     
        change &lt;- <span class="hljs-keyword">true</span>; 
    }

    aspect <span class="hljs-keyword">default</span> {
        <span class="hljs-title">draw</span> cube(<span class="hljs-number">1</span>) <span class="hljs-built_in">color</span>:<span class="hljs-built_in">color</span> border:<span class="hljs-built_in">color</span> at:location;
    }   
}


experiment Display type: gui {
    output {
        display View1 type:opengl draw_env:<span class="hljs-keyword">false</span>{
            species cells transparency:<span class="hljs-number">0.1</span>;
            graphics <span class="hljs-string">"di"</span>{
             <span class="hljs-title">draw</span> <span class="hljs-string">"black(0,0,0)"</span> at:{<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>} <span class="hljs-built_in">color</span>:°black <span class="hljs-built_in">perspective</span>:<span class="hljs-keyword">false</span>;
             <span class="hljs-title">draw</span> <span class="hljs-string">"red(1,0,0)"</span> at:{world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">width</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>} <span class="hljs-built_in">color</span>:°<span class="hljs-built_in">red</span> <span class="hljs-built_in">perspective</span>:<span class="hljs-keyword">false</span>;
             <span class="hljs-title">draw</span> <span class="hljs-string">"green(0,1,0)"</span> at:{<span class="hljs-number">0</span>,world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">height</span>,<span class="hljs-number">0</span>} <span class="hljs-built_in">color</span>:°<span class="hljs-built_in">green</span> <span class="hljs-built_in">perspective</span>:<span class="hljs-keyword">false</span>;
             <span class="hljs-title">draw</span> <span class="hljs-string">"blue(0,0,1)"</span> at:{<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">width</span>} <span class="hljs-built_in">color</span>:°<span class="hljs-built_in">blue</span> <span class="hljs-built_in">perspective</span>:<span class="hljs-keyword">false</span>;
             <span class="hljs-title">draw</span> <span class="hljs-string">"yellow(1,1,0)"</span> at:{world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">width</span>,world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">height</span>,<span class="hljs-number">0</span>} <span class="hljs-built_in">color</span>:°yellow <span class="hljs-built_in">perspective</span>:<span class="hljs-keyword">false</span>;
             <span class="hljs-title">draw</span> <span class="hljs-string">"magenta(1,0,1)"</span> at:{world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">width</span>,<span class="hljs-number">0</span>,world.<span class="hljs-built_in">shape</span>.depth} <span class="hljs-built_in">color</span>:°magenta <span class="hljs-built_in">perspective</span>:<span class="hljs-keyword">false</span>;
             <span class="hljs-title">draw</span> <span class="hljs-string">"cyan(0,1,1)"</span> at:{<span class="hljs-number">0</span>,world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">height</span>,world.<span class="hljs-built_in">shape</span>.depth} <span class="hljs-built_in">color</span>:°cyan <span class="hljs-built_in">perspective</span>:<span class="hljs-keyword">false</span>;
             <span class="hljs-title">draw</span> <span class="hljs-string">"white(1,1,1)"</span> at:{world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">width</span>,world.<span class="hljs-built_in">shape</span>.<span class="hljs-built_in">height</span>,world.<span class="hljs-built_in">shape</span>.depth} <span class="hljs-built_in">color</span>:°white <span class="hljs-built_in">perspective</span>:<span class="hljs-keyword">false</span>;    
            }
        }
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/BC2019-Gama-Site/" class="nav-home"><img src="/BC2019-Gama-Site/img/favicon.ico" alt="Test Site" width="66" height="58"/></a><div><h5>Docs</h5><a href="/BC2019-Gama-Site/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc2.html">Guides (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/BC2019-Gama-Site/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/BC2019-Gama-Site/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/BC2019-Gama-Site/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div></body></html>
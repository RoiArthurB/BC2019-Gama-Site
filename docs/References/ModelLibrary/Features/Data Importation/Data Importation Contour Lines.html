<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>References/ModelLibrary/Features/Data Importation/Data Importation Contour Lines · GAMA-Platform</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="GAMA, modeling made easy"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="References/ModelLibrary/Features/Data Importation/Data Importation Contour Lines · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://roiarthurb.github.io/BC2019-Gama-Site/"/><meta property="og:description" content="GAMA, modeling made easy"/><meta property="og:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/atom.xml" title="GAMA-Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/feed.xml" title="GAMA-Platform Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/BC2019-Gama-Site/js/code-block-buttons.js"></script><link rel="stylesheet" href="/BC2019-Gama-Site/css/main.css"/><script src="/BC2019-Gama-Site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/BC2019-Gama-Site/"><img class="logo" src="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a target="_self">Index</a></li><li class=""><a href="/BC2019-Gama-Site/docs/Home" target="_self">Docs</a></li><li class=""><a href="/BC2019-Gama-Site/help" target="_self">Help</a></li><li class=""><a href="/BC2019-Gama-Site/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">References/ModelLibrary/Features/Data Importation/Data Importation Contour Lines</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="contour-lines-import"></a><a href="#contour-lines-import" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contour Lines Import</h1>
<p><em>Author : Patrick Taillandier</em></p>
<p>Model which imports a shapefile of contour lines, build triangles from these contour lines, compute their elevation by using the elevation attribute of the contour lines which had been linked to the elevation column of the shapefile.</p>
<p>Code of the model :</p>
<pre><code class="hljs">

<span class="processing">model contour_lines_import

global {
    <span class="hljs-comment">//the contour lines shapefile</span>
    file shape_file_cl &lt;- file(<span class="hljs-string">'../includes/contourLines.shp'</span>) ;
    
    <span class="hljs-comment">//define the size of the world from the countour line shapefile</span>
    geometry <span class="hljs-built_in">shape</span> &lt;- envelope(shape_file_cl);
    
    init {
        <span class="hljs-comment">//create the contour line agents from the shapefile, and init the elevation for each agent</span>
        create contour_line from: shape_file_cl with: [elevation:: <span class="hljs-built_in">float</span>(read(<span class="hljs-string">"ELEVATION"</span>))];
        
        <span class="hljs-comment">//triangulate the contour lines</span>
        list&lt;geometry&gt; triangles  &lt;- triangulate (list(contour_line));
        
        <span class="hljs-comment">//for each triangle geometry, create a triangle_ag agent and compute the elevation of each of its points (and modified their z value)</span>
        <span class="hljs-built_in">loop</span> tr over: triangles {
            create triangle_ag {
                <span class="hljs-built_in">shape</span> &lt;- tr;
                <span class="hljs-built_in">loop</span> i from: <span class="hljs-number">0</span> to: length(<span class="hljs-built_in">shape</span>.points) - <span class="hljs-number">1</span>{ 
                    <span class="hljs-built_in">float</span> val &lt;- (contour_line closest_to (<span class="hljs-built_in">shape</span>.points at i)).elevation;
                    <span class="hljs-built_in">shape</span> &lt;- <span class="hljs-built_in">shape</span> set_z (i,val);
                }
            }
        }   
    }
}

species contour_line {
    <span class="hljs-built_in">float</span> elevation;
    aspect <span class="hljs-keyword">default</span> {
        <span class="hljs-title">draw</span> <span class="hljs-built_in">shape</span> + <span class="hljs-number">5.0</span> <span class="hljs-built_in">color</span>: #<span class="hljs-built_in">red</span> depth: <span class="hljs-number">10</span> at: {location.x,location.y, elevation}; 
    }
}
species triangle_ag {
    aspect <span class="hljs-keyword">default</span> {
        <span class="hljs-title">draw</span> <span class="hljs-built_in">shape</span> <span class="hljs-built_in">color</span>: #grey ; 
    }
}


experiment contour_lines_import type: gui {
    output {
        display <span class="hljs-built_in">map</span> type: opengl {
            species triangle_ag refresh: <span class="hljs-keyword">false</span>;
            species contour_line refresh: <span class="hljs-keyword">false</span>;
        }
    }
}
</span></code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/BC2019-Gama-Site/" class="nav-home"><img src="/BC2019-Gama-Site/resources/images/general/GamaPlatform.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Docs</h5><a href="/BC2019-Gama-Site/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc2.html">Guides (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/BC2019-Gama-Site/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/BC2019-Gama-Site/blog">Blog</a><a href="https://github.com/">GitHub</a></div></section><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div></body></html>
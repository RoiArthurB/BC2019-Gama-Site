<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Articles ville_5 · GAMA-Platform</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="GAMA, modeling made easy"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Articles ville_5 · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://roiarthurb.github.io/BC2019-Gama-Site/"/><meta property="og:description" content="GAMA, modeling made easy"/><meta property="og:image" content="https://roiarthurb.github.io/BC2019-Gama-Site//resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://roiarthurb.github.io/BC2019-Gama-Site//resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/BC2019-Gama-Site//resources/images/general/GamaPlatform.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/atom.xml" title="GAMA-Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/feed.xml" title="GAMA-Platform Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js" async=""></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js" async=""></script><script type="text/javascript" src="/BC2019-Gama-Site/js/code-block-buttons.js" async=""></script><link rel="stylesheet" href="/BC2019-Gama-Site/css/main.css"/><script src="/BC2019-Gama-Site/js/codetabs.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/BC2019-Gama-Site/"><img class="logo" src="/BC2019-Gama-Site//resources/images/general/GamaPlatform.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/BC2019-Gama-Site/docs/Home" target="_self">Documentation</a></li><li class=""><a href="/BC2019-Gama-Site/docs/Tutorials" target="_self">Tutorials</a></li><li class=""><a href="/BC2019-Gama-Site/help" target="_self">Download</a></li><li class=""><a href="/BC2019-Gama-Site/help" target="_self">Contribute</a></li><li class=""><a href="/BC2019-Gama-Site/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Articles ville_5</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="ville-5"></a><a href="#ville-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ville 5</h1>
<p>_Author : _</p>
<p>Creation of buildings and roads thanks to a shape file. The color of the building depends on the type of the building, while the color of a house depend on its income. People among the world will try to find the best building according to the mean income of their neighbors and their own income, but also to their working place. This model add a new display showing the &quot;color&quot; of each building according to the mean income of its residents</p>
<p>Code of the model :</p>
<pre><code class="hljs">model ville

global {
    file shape_file_batiments &lt;- file(<span class="hljs-string">"../includes/batiments.shp"</span>);
    file shape_file_routes &lt;- file(<span class="hljs-string">"../includes/routes.shp"</span>);
    geometry shape &lt;- envelope(shape_file_routes);
    graph&lt;point, route&gt; reseau_route;
    
    init {
        create route from: shape_file_routes;
        reseau_route &lt;- as_edge_graph(route);
        create batiment from: shape_file_batiments with: [type:: string(read(<span class="hljs-string">"NATURE"</span>))];
        create foyer number: 500;
    }
} 

species foyer {
    float revenu &lt;- gauss(1500, 500);
    bool est_satisfait update: calculer_satisfaction();
    batiment habitation;
    batiment lieu_travail;
    init {
        lieu_travail &lt;- one_of(batiment where (each.type = <span class="hljs-string">"Industrial"</span>));
        habitation &lt;- choisir_batiment(); 
        do emmenager;
    }
    bool calculer_satisfaction {
        list&lt;foyer&gt; voisins &lt;- foyer at_distance 50.0;
        float revenu_moyen &lt;- mean(voisins collect (each.revenu));
        return empty(voisins) or (revenu_moyen &gt; (revenu * 0.7) and revenu_moyen &lt; (revenu / 0.7));
    }
    action emmenager {
        habitation.capacite &lt;- habitation.capacite - 1;
        habitation.foyers &lt;&lt; self;
        location &lt;- any_location_in(habitation.shape) + {0,0, habitation.hauteur};
    }
    action demenager {
        habitation.capacite &lt;- habitation.capacite + 1;
        remove self from: habitation.foyers;
    }
    batiment choisir_batiment {
        return one_of(batiment where ((each.capacite &gt;0) and ( each.distances[lieu_travail]&lt; 1000.0)));
    }
    reflex demenagement when: !est_satisfait {
        do demenager;
        habitation &lt;- choisir_batiment();
        do emmenager;
    }
    aspect revenu {
        int val &lt;- int(255 * (revenu / 3000));
        draw sphere(5) color: rgb(255 - val, val, 0);
    }
}
species batiment {
    string type;
    int capacite &lt;- type = <span class="hljs-string">"Industrial"</span> ? 0 : int(shape.area / 70.0);
    map&lt;batiment,float&gt; distances;
    int hauteur &lt;- 5 + rnd(10);
    list&lt;foyer&gt; foyers ;
    float revenu_moyen update: empty(foyer) ? 0.0 : mean (foyers collect each.revenu);
    init {
        loop bat over: batiment where (each.type = <span class="hljs-string">"Industrial"</span>) {
            put (topology(reseau_route) distance_between [self,bat]) at: bat in: distances;
        }
    }
    aspect geometrie {
        draw shape color: type = <span class="hljs-string">"Industrial"</span> ? #pink : #gray depth: hauteur;
    }
    aspect information_foyer {
        draw shape color: type = <span class="hljs-string">"Industrial"</span> ? #pink : (empty(foyers) ? #gray : rgb(int(255 * (1 - (revenu_moyen / 3000))), int(255 * (revenu_moyen / 3000)), 0)) depth: length(foyers);
    }
}
species route {
    aspect geometrie {
        draw shape color: #black;
    }
}
experiment ville type: gui {
    output {
        display carte_principale type: java2D {
            species batiment aspect: geometrie;
            species route aspect: geometrie;
            species foyer aspect: revenu;
        }
        display carte_batiment type: opengl {
            species batiment aspect: information_foyer;
        }
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/BC2019-Gama-Site/" class="nav-home"><img src="/BC2019-Gama-Site//resources/images/general/GamaPlatform.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Networks</h5><a href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank"><i class="fab fa-youtube"></i> Youtube</a><a href="https://www.linkedin.com/company/gama-platform" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a><a href="https://twitter.com/gamaplatform" target="_blank"><i class="fab fa-twitter"></i> Twitter</a><a href="https://www.facebook.com/GamaPlatform/" target="_blank"><i class="fab fa-facebook"></i> Facebook</a></div><div><h5>Mailing list</h5><a href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br/>gama-platform@googlegroups.com</a><a href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br/>gama-dev@googlegroups.com</a></div><div><h5>Ecosystem</h5><a href="https://github.com/gama-platform/gama"><i class="fab fa-github"></i> GitHub Gama</a><a href="https://github.com/gama-platform/gama.experimental"><i class="fas fa-puzzle-piece"></i> Gama Experimental Plugins</a><a href="https://github.com/gama-platform/gama.models.experimental"><i class="fas fa-scroll"></i> Gama Experimental Models</a></div></section><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0f9f28b9ab9efae89810921a351753b5',
                indexName: 'github',
                inputSelector: '#search_input_react'
              });
            </script></body></html>
<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>WikiOnly/Events/Event__CP12Batch · Test Site</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;batch-experiments&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#batch-experiments&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Batch Experiments&lt;/h1&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="WikiOnly/Events/Event__CP12Batch · Test Site"/><meta property="og:type" content="website"/><meta property="og:url" content="https://roiarthurb.github.io/BC2019-Gama-Site/"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;batch-experiments&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#batch-experiments&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Batch Experiments&lt;/h1&gt;
"/><meta property="og:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://roiarthurb.github.io/BC2019-Gama-Site/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/BC2019-Gama-Site/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/atom.xml" title="Test Site Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://roiarthurb.github.io/BC2019-Gama-Site/blog/feed.xml" title="Test Site Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><link rel="stylesheet" href="/BC2019-Gama-Site/css/main.css"/><script src="/BC2019-Gama-Site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/BC2019-Gama-Site/"><img class="logo" src="/BC2019-Gama-Site/img/favicon.ico" alt="Test Site"/><h2 class="headerTitleWithLogo">Test Site</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/BC2019-Gama-Site/docs/doc1" target="_self">Docs</a></li><li class=""><a href="/BC2019-Gama-Site/help" target="_self">Help</a></li><li class=""><a href="/BC2019-Gama-Site/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">WikiOnly/Events/Event__CP12Batch</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="batch-experiments"></a><a href="#batch-experiments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Batch Experiments</h1>
<p>By the Batch People</p>
<p>Philippe Caillou,
Thomas Louail,
Nicolas Marilleau,
Huynh Quang Nghi,
Serge Stinckwich,
Patrick Taillandier,
Jean-Daniel Zucker</p>
<h2><a class="anchor" aria-hidden="true" id="what-do-we-have"></a><a href="#what-do-we-have" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What do we have?</h2>
<p>Define an experiment, batch mode (but same capabilities as GUI mode)</p>
<p>·         Parameter exploration:  Param element</p>
<p>o   Explicit</p>
<p>o   List with step</p>
<p>·         Method Element</p>
<p>o   Exhaustive</p>
<p>o   Hill climbing</p>
<p>o   Simulated annealing</p>
<p>o   Tabu Search</p>
<p>o   Reactive Tabu Search</p>
<p>o   Genetic Algorithm</p>
<p>·         File export</p>
<p>o   File</p>
<h2><a class="anchor" aria-hidden="true" id="how-does-it-work"></a><a href="#how-does-it-work" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How does it work?</h2>
<p>·         The experiment (the plan) creates the simulation (future: Headless mode)</p>
<h2><a class="anchor" aria-hidden="true" id="what-would-be-great-in-gama-124"></a><a href="#what-would-be-great-in-gama-124" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What would be great in Gama 12.4?</h2>
<p>·         Export agent/simulation data in the file</p>
<p>o   =&gt;Define code in the experiment (loop over agents)</p>
<p>·         Put rules for variable exploration</p>
<p>o   Ex: explore b={1,2,3}. if a=2 explore b={2,3} only</p>
<p>o   How? Put code in the exploring loop =&gt; put real GAML code in the agent</p>
<p>o   =&gt; reflex &quot;method&quot; or &quot;explore&quot;</p>
<p>o   Some existing exploration actions can be used with a ParameterSet (Map?) parameter</p>
<p>·         Show plots in batch</p>
<p>o   Define output with the code/variable of the experiment agent</p>
<p>o   Require a getVariable() operator that gets the last simulation variables values</p>
<p>·         Compare agent trajectories</p>
<p>o   Stats a posteriori</p>
<p>o   (not possible inside a simulation because there is no end)</p>
<p>o   =&gt; action « aftersimulation » défined by the user</p>
<p>o   Require a getVariable() operator that gets the last simulation variables values (to be able to loop on agents)</p>
<p>·         Define more parameters/variables in the file (CSV)</p>
<p>o   =&gt; use of the Save already working</p>
<p>·         Launch parallel simulation on multicore/clusters</p>
<p>o   =&gt; special action &quot;runSimulation&quot; parameter to launch 4 in parallel?</p>
<p>·         &quot;Generate&quot; agents</p>
<p>o   Define agent parameters by using global/previous variables/files</p>
<p>o   Use of an &quot;initSimulation&quot; action before the &quot;runSimulation&quot; to  be able to change manually the simulation parameters</p>
<p>·         Définition graphique de l’espace de valeur, éventuellement en 2D et disjoint</p>
<p>o   Specific OutPut</p>
<h2><a class="anchor" aria-hidden="true" id="the-solution"></a><a href="#the-solution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Solution</h2>
<p>Define a new <strong>Experimenter</strong> agent and put real code/reflexes/actions... GAML code inside the Experimenter.</p>
<h2><a class="anchor" aria-hidden="true" id="one-simple-example-of-what-would-be-great"></a><a href="#one-simple-example-of-what-would-be-great" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>One simple example of what would be great:</h2>
<pre><code class="hljs">experiment InteliExplore <span class="hljs-string">type:</span> batch <span class="hljs-string">repeat:</span> <span class="hljs-number">2</span> <span class="hljs-string">keep_seed:</span> <span class="hljs-literal">true</span> <span class="hljs-string">until:</span> ( time &gt; <span class="hljs-number">200</span> ) {
      <span class="hljs-keyword">int</span> nbprey <span class="hljs-string">init:</span><span class="hljs-number">0</span>;
      <span class="hljs-keyword">int</span> nbpredator <span class="hljs-string">init:</span><span class="hljs-number">0</span>;

      init
      {
            <span class="hljs-comment">//for example read experiment plan from file</span>
           
      }
     

      reflex method
      {
            loop prm <span class="hljs-string">over:</span>prey_max
            {
<span class="hljs-symbol">                   do:</span> createsimulation
                   setParameter(<span class="hljs-string">"nb_preys_init"</span>,pr)
<span class="hljs-symbol">
                   do:</span> initsimulation

                   <span class="hljs-keyword">if</span> (prey_max&lt;<span class="hljs-number">100</span>)
                   setParameter(<span class="hljs-string">"nb_predators_init"</span>,<span class="hljs-number">200</span>)
                   <span class="hljs-keyword">if</span> (prey_max&gt;<span class="hljs-number">100</span>)
                   setParameter(<span class="hljs-string">"nb_predators_init"</span>,<span class="hljs-number">200</span>)
<span class="hljs-symbol">
                   do:</span> runsimulation;
<span class="hljs-symbol">
                   do:</span> aftersimulation;
                  
            }
      }

      action aftersimulation
      {
            loop over getVariable(agents)
            {
                   log(<span class="hljs-string">"everything dans file"</span>);      <span class="hljs-comment">//with the save function?</span>
            }     
      }

      chart <span class="hljs-string">name:</span> <span class="hljs-string">'Species evolution'</span> <span class="hljs-string">type:</span> series <span class="hljs-string">background:</span> rgb(<span class="hljs-string">'white'</span>) <span class="hljs-string">size:</span> {<span class="hljs-number">1</span>,<span class="hljs-number">0.4</span>} <span class="hljs-string">position:</span> {<span class="hljs-number">0</span>, <span class="hljs-number">0.05</span>}
      {
      data initial_number_of_preys <span class="hljs-string">value:</span> getValue(<span class="hljs-string">"nb_preys_init"</span>) <span class="hljs-string">color:</span> rgb(<span class="hljs-string">'blue'</span>) ;
        data final_number_of_predator <span class="hljs-string">value:</span> getValue(<span class="hljs-string">"nb_predators"</span>) <span class="hljs-string">color:</span> rgb(<span class="hljs-string">'red'</span>) ;
      }
    file <span class="hljs-string">name:</span> <span class="hljs-string">'logsimple'</span> <span class="hljs-string">type:</span> text <span class="hljs-string">data:</span> <span class="hljs-string">'simulation: '</span>+ step
                                  +<span class="hljs-string">'; allparams'</span> + getAllParamters <span class="hljs-comment">// PROBLEME comment sauver tous les parametres?</span>
                                   + <span class="hljs-string">'; nbPreys: '</span> + getValue(<span class="hljs-string">"nb_preys_init"</span>)
                                    + <span class="hljs-string">'; finalPredators: '</span> + getValue(<span class="hljs-string">"nb_preys"</span>) ;
}

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="todo"></a><a href="#todo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TODO</h2>
<p>And Alexis did almost all this in less than a day....... But how does he do that??</p>
<ul>
<li><p>A new type of Custom Experiment</p></li>
<li><p>In this experiment block, an ExperimenterAgent manages the simulations</p></li>
<li><p>Init() may have to create a Simulation to get a Scheduler (?) and/or a World(?)</p></li>
<li><p>He must have a Scheduler to be able to stop/wait in a loop for the end of a Simulation (contradiction with previous point...)</p></li>
<li><p>Its most important function is to be able to call Simulation.step()</p></li>
</ul>
<p>=&gt;Create a Simulation Type which has a Step() operator</p>
<ul>
<li><p>Create a ExperimentatorSkill with a lot of usefull actions (Step(int), ...)</p></li>
<li><p>Check that it is possible to define plots, logs, ...</p></li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#what-do-we-have">What do we have?</a></li><li><a href="#how-does-it-work">How does it work?</a></li><li><a href="#what-would-be-great-in-gama-124">What would be great in Gama 12.4?</a></li><li><a href="#the-solution">The Solution</a></li><li><a href="#one-simple-example-of-what-would-be-great">One simple example of what would be great:</a></li><li><a href="#todo">TODO</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/BC2019-Gama-Site/" class="nav-home"><img src="/BC2019-Gama-Site/img/favicon.ico" alt="Test Site" width="66" height="58"/></a><div><h5>Docs</h5><a href="/BC2019-Gama-Site/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc2.html">Guides (or other categories)</a><a href="/BC2019-Gama-Site/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/BC2019-Gama-Site/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/BC2019-Gama-Site/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/BC2019-Gama-Site/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div></body></html>
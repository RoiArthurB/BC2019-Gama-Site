<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Defining actions and behaviors · GAMA-Platform</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="GAMA"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Defining actions and behaviors · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://roiarthurb.github.io/BC2019-Gama-Site/"/><meta property="og:description" content="GAMA"/><meta property="og:image" content="https://roiarthurb.github.io/BC2019-Gama-Site//resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://roiarthurb.github.io/BC2019-Gama-Site//resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/BC2019-Gama-Site//img/gama-logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/BC2019-Gama-Site/css/code-block-buttons.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.4.4/fuse.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/BC2019-Gama-Site/js/code-block-buttons.js"></script><script type="text/javascript" src="/BC2019-Gama-Site/js/searchEngine.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/BC2019-Gama-Site/css/main.css"/><script src="/BC2019-Gama-Site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/BC2019-Gama-Site/"><img class="logo" src="/BC2019-Gama-Site//img/gama-logo_white.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/BC2019-Gama-Site/wiki/Home" target="_self">Documentation</a></li><li class=""><a href="/BC2019-Gama-Site/wiki/Tutorials" target="_self">Tutorials</a></li><li class=""><a href="/BC2019-Gama-Site/download" target="_self">Download</a></li><li class=""><a href="/BC2019-Gama-Site/wiki/Contribute" target="_self">Contribute</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Defining actions and behaviors</h1></header><article><div><span><p>Both actions and behaviors can be seen as methods in OOP. They can be defined in any species.</p>
<h2><a class="anchor" aria-hidden="true" id="index"></a><a href="#index" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Index</h2>
<ul>
<li><a href="#action">Action</a>
<ul>
<li><a href="#declare-an-action">Declare an action</a></li>
<li><a href="#call-an-action">Call an action</a></li>
</ul></li>
<li><a href="#behavior">Behavior</a></li>
<li><a href="#example">Example</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="action"></a><a href="#action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Action</h2>
<h3><a class="anchor" aria-hidden="true" id="declare-an-action"></a><a href="#declare-an-action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declare an action</h3>
<p>An action is a function run by an instance of species. An action can return a value (in that case, the type of return has to be specify just before the name of the action), or not (in that case, you just have to put the keyword <code>action</code> before the name of the action).</p>
<pre><code class="hljs"><span class="hljs-class">species <span class="hljs-title">my_species</span> </span>{
    <span class="hljs-literal">int</span> action_with_return_value {
        <span class="hljs-comment">// statements...</span>
        return 1;
    }
    action action_without_return_value {
        <span class="hljs-comment">// statements...</span>
    }
}
</code></pre>
<p>Arguments can also be mandated in your action. You have to specify the type and the name of the argument:</p>
<pre><code class="hljs">action action_without_return_value (<span class="hljs-literal">int</span> argA, <span class="hljs-literal">float</span> argB) {
    <span class="hljs-comment">// statements...</span>
}
</code></pre>
<p>If you want to have some optional arguments in the list, you can give some by default values to turn them optional. Nb: it is better to define the optional arguments at the end of the list of argument.</p>
<pre><code class="hljs">action my_action (<span class="hljs-literal">int</span> argA, <span class="hljs-literal">float</span> argB &lt;- 5.1, <span class="hljs-literal">point</span> argC &lt;- {0,0}) {
    <span class="hljs-comment">// statements...</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="call-an-action"></a><a href="#call-an-action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Call an action</h3>
<p>To call an action, you have to use the statement <code>do</code>. You can use the statement do different ways:</p>
<ul>
<li>With facets : after specifying the name of your action, you can specify the values of your arguments as if the name of your arguments were facets:</li>
</ul>
<pre><code class="hljs">do my_action argA:5 argB:5.1;
</code></pre>
<ul>
<li>With parenthesis : after specifying the name of your action, you can specify the values of your arguments in the same order they were declared, between parenthesis:</li>
</ul>
<pre><code class="hljs">do my_action (5,5.1);
</code></pre>
<p>We incite you to promote the second writing. To catch the returned value, you can also skip the do statement, and store the value directly in a temporary variable:</p>
<pre><code class="hljs"><span class="hljs-literal">int</span> var1 &lt;- my_action(5,5.1);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="behavior"></a><a href="#behavior" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Behavior</h2>
<p>A behavior, or reflex, is an action which is called automatically at each time step by an agent.</p>
<pre><code class="hljs"><span class="hljs-class">reflex <span class="hljs-title">my_reflex</span> </span>{
    write (<span class="hljs-string">"Executing the inconditional reflex"</span>);
<span class="hljs-comment">// statements...</span>
}
</code></pre>
<p>With the facet when, this reflex is only executed when the boolean expression evaluates to true. It is a convenient way to specify the behavior of agents.</p>
<pre><code class="hljs"><span class="hljs-class">reflex <span class="hljs-title">my_reflex</span> <span class="hljs-title">when</span>:<span class="hljs-title">flip</span>(0.5) </span>{
    write (<span class="hljs-string">"Executing the conditional reflex"</span>);
<span class="hljs-comment">// statements...</span>
}
</code></pre>
<p>Reflex, unlike actions, cannot be called from another context. But a reflex can, of course, call actions.</p>
<p>Nb : Init is a special reflex, that occurs only when the agent is created.</p>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>To practice a bit with those notions, we will build an easy example. Let's build a model with a species balloon that has 2 attributes: balloon_size (float) and balloon_color (rgb). Each balloon has a random position and color, his aspect is a sphere. Each step, a balloon has a probability to spawn in the environment. Once a balloon is created, its size is 10cm, and each step, the size increases by 1cm. Once the balloon size reaches 50cm, the balloon has a probability to burst. Once 10 balloons are destroyed, the simulation stops. The volume of each balloon is displayed in the balloon position.</p>
<p><img src="../resources/images/manipulateBasicSpecies/burst_the_baloon.png" alt="images/burst_the_baloon.png"></p>
<p>Here is one of the multiple possible implementation:</p>
<pre><code class="hljs"><span class="hljs-builtin">model</span> burst_the_baloon

<span class="hljs-class">global</span>{
    <span class="hljs-literal">float</span> worldDimension &lt;- 5#m;
    <span class="hljs-literal">geometry</span> shape &lt;- square(worldDimension);
    <span class="hljs-literal">int</span> nbBaloonDead &lt;- 0;

    <span class="hljs-class">reflex <span class="hljs-title">buildBaloon</span> <span class="hljs-title">when</span>:(<span class="hljs-title">flip</span>(0.1)) </span>{
        create <span class="hljs-class">species:<span class="hljs-title">balloon</span> <span class="hljs-title">number</span>:1;</span>
    }
    
    <span class="hljs-class">reflex <span class="hljs-title">endSimulation</span> <span class="hljs-title">when</span>:<span class="hljs-title">nbBaloonDead</span>&gt;10 </span>{
        do halt;
    }
}

<span class="hljs-class">species <span class="hljs-title">balloon</span> </span>{
    <span class="hljs-literal">float</span> balloon_size;
    <span class="hljs-literal">rgb</span> balloon_color;
    init {
        balloon_size &lt;- 0.1;
        balloon_color &lt;- <span class="hljs-literal">rgb</span>(rnd(255),rnd(255),rnd(255));
    }

    <span class="hljs-class">reflex <span class="hljs-title">balloon_grow</span> </span>{
        balloon_size &lt;- balloon_size + 0.01;
        <span class="hljs-keyword">if</span> (balloon_size &gt; 0.5) {
            <span class="hljs-keyword">if</span> (flip(0.2)) {
                do balloon_burst;
            }
        }
    }
    
    <span class="hljs-literal">float</span> balloon_volume (<span class="hljs-literal">float</span> diameter) {
        <span class="hljs-literal">float</span> exact_value &lt;- 2/3*#pi*diameter^3;
        <span class="hljs-literal">float</span> round_value &lt;- (round(exact_value*1000))/1000;
        return round_value;
    }
    
    action balloon_burst {
        write <span class="hljs-string">"the baloon is dead !"</span>;
        nbBaloonDead &lt;- nbBaloonDead + 1;
        do die;
    }
    
    aspect balloon_aspect {
        draw circle(balloon_size) color:balloon_color;
        draw text:<span class="hljs-literal">string</span>(balloon_volume(balloon_size)) color:#black;
    }
}

<span class="hljs-class">experiment <span class="hljs-title">my_experiment</span> <span class="hljs-title">type</span>:<span class="hljs-title">gui</span></span>
{
    output{
        <span class="hljs-class">display <span class="hljs-title">myDisplay</span> </span>{
            <span class="hljs-class">species <span class="hljs-title">balloon</span> <span class="hljs-title">aspect</span>:<span class="hljs-title">balloon_aspect</span>;</span>
        }
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#index">Index</a></li><li><a href="#action">Action</a><ul class="toc-headings"><li><a href="#declare-an-action">Declare an action</a></li><li><a href="#call-an-action">Call an action</a></li></ul></li><li><a href="#behavior">Behavior</a></li><li><a href="#example">Example</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/BC2019-Gama-Site/" class="nav-home"><img src="/BC2019-Gama-Site//img/gama-logo.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Networks</h5><a href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank"><i class="fab fa-youtube"></i> Youtube</a><a href="https://www.linkedin.com/company/gama-platform" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a><a href="https://twitter.com/gamaplatform" target="_blank"><i class="fab fa-twitter"></i> Twitter</a><a href="https://www.facebook.com/GamaPlatform/" target="_blank"><i class="fab fa-facebook"></i> Facebook</a></div><div><h5>Mailing list</h5><a href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br/>gama-platform@googlegroups.com</a><a href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br/>gama-dev@googlegroups.com</a></div><div><h5>Ecosystem</h5><a href="https://github.com/gama-platform/gama"><i class="fab fa-github"></i> GitHub Gama</a><a href="https://github.com/gama-platform/gama.experimental"><i class="fas fa-puzzle-piece"></i> Gama Experimental Plugins</a><a href="https://github.com/gama-platform/gama.models.experimental"><i class="fas fa-scroll"></i> Gama Experimental Models</a></div></section><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'undefined',
                inputSelector: '#search_input_react'
              });
            </script></body></html>